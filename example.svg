<svg class="railroad" viewBox="0 0 2224 680" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<style type="text/css">

svg.railroad {
    background-color: hsl(30, 20%, 95%);
    background-size: 15px 15px;
    background-image: linear-gradient(to right, rgba(30, 30, 30, .05) 1px, transparent 1px),
                      linear-gradient(to bottom, rgba(30, 30, 30, .05) 1px, transparent 1px);
}

svg.railroad path {
    stroke-width: 3px;
    stroke: black;
    fill: transparent;
}

svg.railroad .debug {
    stroke-width: 1px;
    stroke: red;
}

svg.railroad text {
    font: 14px monospace;
    text-anchor: middle;
}

svg.railroad .nonterminal text {
    font-weight: bold;
}

svg.railroad text.comment {
    font: italic 12px monospace;
}

svg.railroad rect {
    stroke-width: 3px;
    stroke: black;
    fill:hsl(-290, 70%, 90%);
}

svg.railroad g.labeledbox &gt; rect {
    stroke-width: 1px;
    stroke: grey;
    stroke-dasharray: 5px;
    fill:rgba(90, 90, 150, .1);
}
</style>
<g class="verticalgrid">
<g class="sequence">
<path d=" M 10 59 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="labeledbox">
<rect height="179" width="1088" x="35" y="10"/>
<path d=" M 35 59 h 8 m 1072 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="308" x="43" y="18"/>
<text x="197" y="34">
ConfigBuilder&lt;_, WantsCipherSuites&gt;</text>
</g>
<g class="choice">
<path d=" M 43 59 h 24 m 164 0 h 884 m -439 0 l -5 -5 m 0 10 l 5 -5 m 439 0"/>
<g class="nonterminal">
<rect height="22" width="164" x="67" y="48"/>
<text x="149" y="64">
with_safe_defaults</text>
</g>
<path d=" M 43 59 a 12 12 0 0 1 12 12 v 9 m 1048 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 55 80 v 37 a 12 12 0 0 0 12 12 m 1024 0 h 0 a 12 12 0 0 0 12 -12 v -37"/>
<g class="sequence">
<g class="choice">
<path d=" M 67 129 h 24 m 164 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0"/>
<g class="nonterminal">
<rect height="22" width="164" x="91" y="118"/>
<text x="173" y="134">
with_cipher_suites</text>
</g>
<path d=" M 67 129 a 12 12 0 0 1 12 12 v 9 m 300 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 79 150 v 0 a 12 12 0 0 0 12 12 m 276 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="276" x="91" y="151"/>
<text x="229" y="167">
with_safe_default_cipher_suites</text>
</g>
</g>
<g class="labeledbox">
<rect height="101" width="308" x="401" y="80"/>
<path d=" M 401 129 h 8 m 292 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="276" x="409" y="88"/>
<text x="547" y="104">
ConfigBuilder&lt;_, WantsKxGroups&gt;</text>
</g>
<g class="choice">
<path d=" M 409 129 h 24 m 132 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0"/>
<g class="nonterminal">
<rect height="22" width="132" x="433" y="118"/>
<text x="499" y="134">
with_kx_groups</text>
</g>
<path d=" M 409 129 a 12 12 0 0 1 12 12 v 9 m 268 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 421 150 v 0 a 12 12 0 0 0 12 12 m 244 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="244" x="433" y="151"/>
<text x="555" y="167">
with_safe_default_kx_groups</text>
</g>
</g>
</g>
<g class="labeledbox">
<rect height="101" width="372" x="719" y="80"/>
<path d=" M 719 129 h 8 m 356 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="276" x="727" y="88"/>
<text x="865" y="104">
ConfigBuilder&lt;_, WantsVersions&gt;</text>
</g>
<g class="choice">
<path d=" M 727 129 h 24 m 204 0 h 128 m -61 0 l -5 -5 m 0 10 l 5 -5 m 61 0"/>
<g class="nonterminal">
<rect height="22" width="204" x="751" y="118"/>
<text x="853" y="134">
with_protocol_versions</text>
</g>
<path d=" M 727 129 a 12 12 0 0 1 12 12 v 9 m 332 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 739 150 v 0 a 12 12 0 0 0 12 12 m 308 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="308" x="751" y="151"/>
<text x="905" y="167">
with_safe_default_protocol_versions</text>
</g>
</g>
</g>
<path d=" M 391 129 h 10"/>
<path d=" M 709 129 h 10"/>
</g>
</g>
</g>
<g class="labeledbox">
<rect height="101" width="388" x="1133" y="10"/>
<path d=" M 1133 59 h 8 m 276 0 h 104 m -49 0 l -5 -5 m 0 10 l 5 -5 m 49 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="372" x="1141" y="18"/>
<text x="1327" y="34">
ConfigBuilder&lt;ServerConfig, WantsVerifier&gt;</text>
</g>
<g class="choice">
<path d=" M 1141 59 h 24 m 228 0 h 24"/>
<g class="nonterminal">
<rect height="22" width="228" x="1165" y="48"/>
<text x="1279" y="64">
with_client_cert_verifier</text>
</g>
<path d=" M 1141 59 a 12 12 0 0 1 12 12 v 9 m 252 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 1153 80 v 0 a 12 12 0 0 0 12 12 m 172 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="172" x="1165" y="81"/>
<text x="1251" y="97">
with_no_client_auth</text>
</g>
</g>
</g>
<g class="labeledbox">
<rect height="134" width="404" x="1531" y="10"/>
<path d=" M 1531 59 h 8 m 348 0 h 48"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="388" x="1539" y="18"/>
<text x="1733" y="34">
ConfigBuilder&lt;ServerConfig, WantsServerCert&gt;</text>
</g>
<g class="choice">
<path d=" M 1539 59 h 24 m 148 0 h 176 m -85 0 l -5 -5 m 0 10 l 5 -5 m 85 0"/>
<g class="nonterminal">
<rect height="22" width="148" x="1563" y="48"/>
<text x="1637" y="64">
with_single_cert</text>
</g>
<path d=" M 1539 59 a 12 12 0 0 1 12 12 v 9 m 324 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 1551 80 v 33 m 324 0 v -33"/>
<path d=" M 1551 80 v 0 a 12 12 0 0 0 12 12 m 300 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="300" x="1563" y="81"/>
<text x="1713" y="97">
with_single_cert_with_ocsp_and_sct</text>
</g>
<path d=" M 1551 113 v 0 a 12 12 0 0 0 12 12 m 164 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="164" x="1563" y="114"/>
<text x="1645" y="130">
with_cert_resolver</text>
</g>
</g>
</g>
<path d=" M 1945 59 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 59 h 10"/>
<path d=" M 1123 59 h 10"/>
<path d=" M 1521 59 h 10"/>
<path d=" M 1935 59 h 10"/>
</g>
<g class="sequence">
<path d=" M 10 326 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="labeledbox">
<rect height="179" width="1088" x="35" y="277"/>
<path d=" M 35 326 h 8 m 1072 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="308" x="43" y="285"/>
<text x="197" y="301">
ConfigBuilder&lt;_, WantsCipherSuites&gt;</text>
</g>
<g class="choice">
<path d=" M 43 326 h 24 m 164 0 h 884 m -439 0 l -5 -5 m 0 10 l 5 -5 m 439 0"/>
<g class="nonterminal">
<rect height="22" width="164" x="67" y="315"/>
<text x="149" y="331">
with_safe_defaults</text>
</g>
<path d=" M 43 326 a 12 12 0 0 1 12 12 v 9 m 1048 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 55 347 v 37 a 12 12 0 0 0 12 12 m 1024 0 h 0 a 12 12 0 0 0 12 -12 v -37"/>
<g class="sequence">
<g class="choice">
<path d=" M 67 396 h 24 m 164 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0"/>
<g class="nonterminal">
<rect height="22" width="164" x="91" y="385"/>
<text x="173" y="401">
with_cipher_suites</text>
</g>
<path d=" M 67 396 a 12 12 0 0 1 12 12 v 9 m 300 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 79 417 v 0 a 12 12 0 0 0 12 12 m 276 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="276" x="91" y="418"/>
<text x="229" y="434">
with_safe_default_cipher_suites</text>
</g>
</g>
<g class="labeledbox">
<rect height="101" width="308" x="401" y="347"/>
<path d=" M 401 396 h 8 m 292 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="276" x="409" y="355"/>
<text x="547" y="371">
ConfigBuilder&lt;_, WantsKxGroups&gt;</text>
</g>
<g class="choice">
<path d=" M 409 396 h 24 m 132 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0"/>
<g class="nonterminal">
<rect height="22" width="132" x="433" y="385"/>
<text x="499" y="401">
with_kx_groups</text>
</g>
<path d=" M 409 396 a 12 12 0 0 1 12 12 v 9 m 268 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 421 417 v 0 a 12 12 0 0 0 12 12 m 244 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="244" x="433" y="418"/>
<text x="555" y="434">
with_safe_default_kx_groups</text>
</g>
</g>
</g>
<g class="labeledbox">
<rect height="101" width="372" x="719" y="347"/>
<path d=" M 719 396 h 8 m 356 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="276" x="727" y="355"/>
<text x="865" y="371">
ConfigBuilder&lt;_, WantsVersions&gt;</text>
</g>
<g class="choice">
<path d=" M 727 396 h 24 m 204 0 h 128 m -61 0 l -5 -5 m 0 10 l 5 -5 m 61 0"/>
<g class="nonterminal">
<rect height="22" width="204" x="751" y="385"/>
<text x="853" y="401">
with_protocol_versions</text>
</g>
<path d=" M 727 396 a 12 12 0 0 1 12 12 v 9 m 332 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 739 417 v 0 a 12 12 0 0 0 12 12 m 308 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="308" x="751" y="418"/>
<text x="905" y="434">
with_safe_default_protocol_versions</text>
</g>
</g>
</g>
<path d=" M 391 396 h 10"/>
<path d=" M 709 396 h 10"/>
</g>
</g>
</g>
<g class="labeledbox">
<rect height="469" width="1056" x="1133" y="201"/>
<path d=" M 1133 326 h 8 m 1040 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="372" x="1141" y="209"/>
<text x="1327" y="225">
ConfigBuilder&lt;ClientConfig, WantsVerifier&gt;</text>
</g>
<g class="choice">
<path d=" M 1141 326 h 24 m 992 0 h 24"/>
<g class="sequence">
<g class="nonterminal">
<rect height="22" width="204" x="1165" y="315"/>
<text x="1267" y="331">
with_root_certificates</text>
</g>
<g class="labeledbox">
<rect height="279" width="778" x="1379" y="239"/>
<path d=" M 1379 326 h 8 m 762 0 h 8"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="556" x="1387" y="247"/>
<text x="1665" y="263">
ConfigBuilder&lt;ClientConfig, WantsTransparencyPolicyOrClientCert&gt;</text>
</g>
<g class="choice">
<path d=" M 1387 326 h 24 m 714 0 h 24"/>
<g class="sequence">
<g class="nonterminal">
<rect height="22" width="300" x="1411" y="315"/>
<text x="1561" y="331">
with_certificate_transparency_logs</text>
</g>
<g class="labeledbox">
<rect height="134" width="404" x="1721" y="277"/>
<path d=" M 1721 326 h 8 m 276 0 h 120 m -57 0 l -5 -5 m 0 10 l 5 -5 m 57 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="388" x="1729" y="285"/>
<text x="1923" y="301">
ConfigBuilder&lt;ClientConfig, WantsClientCert&gt;</text>
</g>
<g class="choice">
<path d=" M 1729 326 h 24 m 148 0 h 104 m -49 0 l -5 -5 m 0 10 l 5 -5 m 49 0"/>
<g class="nonterminal">
<rect height="22" width="148" x="1753" y="315"/>
<text x="1827" y="331">
with_single_cert</text>
</g>
<path d=" M 1729 326 a 12 12 0 0 1 12 12 v 9 m 252 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 1741 347 v 33 m 252 0 v -33"/>
<path d=" M 1741 347 v 0 a 12 12 0 0 0 12 12 m 172 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="172" x="1753" y="348"/>
<text x="1839" y="364">
with_no_client_auth</text>
</g>
<path d=" M 1741 380 v 0 a 12 12 0 0 0 12 12 m 228 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="228" x="1753" y="381"/>
<text x="1867" y="397">
with_client_cert_resolver</text>
</g>
</g>
</g>
<path d=" M 1711 326 h 10"/>
</g>
<path d=" M 1387 326 a 12 12 0 0 1 12 12 v 83 m 0 -38 l -5 -5 m 10 0 l -5 5 m 0 38 m 738 0 v -83 m 0 44 l -5 5 m 10 0 l -5 -5 m 0 -44 a 12 12 0 0 1 12 -12"/>
<path d=" M 1399 421 v 33 m 738 0 v -33"/>
<path d=" M 1399 454 v 33 m 738 0 v -33"/>
<path d=" M 1399 421 v 0 a 12 12 0 0 0 12 12 m 148 0 h 566 m -280 0 l -5 -5 m 0 10 l 5 -5 m 280 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="148" x="1411" y="422"/>
<text x="1485" y="438">
with_single_cert</text>
</g>
<path d=" M 1399 454 v 0 a 12 12 0 0 0 12 12 m 172 0 h 542 m -268 0 l -5 -5 m 0 10 l 5 -5 m 268 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="172" x="1411" y="455"/>
<text x="1497" y="471">
with_no_client_auth</text>
</g>
<path d=" M 1399 487 v 0 a 12 12 0 0 0 12 12 m 228 0 h 486 m -240 0 l -5 -5 m 0 10 l 5 -5 m 240 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="228" x="1411" y="488"/>
<text x="1525" y="504">
with_client_cert_resolver</text>
</g>
</g>
</g>
<path d=" M 1369 326 h 10"/>
</g>
<path d=" M 1141 326 a 12 12 0 0 1 12 12 v 190 m 0 -92 l -5 -5 m 10 0 l -5 5 m 0 92 m 1016 0 v -190 m 0 98 l -5 5 m 10 0 l -5 -5 m 0 -98 a 12 12 0 0 1 12 -12"/>
<path d=" M 1153 528 v 37 a 12 12 0 0 0 12 12 m 698 0 h 294 m -144 0 l -5 -5 m 0 10 l 5 -5 m 144 0 a 12 12 0 0 0 12 -12 v -37"/>
<g class="sequence">
<g class="nonterminal">
<rect height="22" width="284" x="1165" y="566"/>
<text x="1307" y="582">
with_custom_certificate_verifier</text>
</g>
<g class="labeledbox">
<rect height="134" width="404" x="1459" y="528"/>
<path d=" M 1459 577 h 8 m 276 0 h 120 m -57 0 l -5 -5 m 0 10 l 5 -5 m 57 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="388" x="1467" y="536"/>
<text x="1661" y="552">
ConfigBuilder&lt;ClientConfig, WantsClientCert&gt;</text>
</g>
<g class="choice">
<path d=" M 1467 577 h 24 m 148 0 h 104 m -49 0 l -5 -5 m 0 10 l 5 -5 m 49 0"/>
<g class="nonterminal">
<rect height="22" width="148" x="1491" y="566"/>
<text x="1565" y="582">
with_single_cert</text>
</g>
<path d=" M 1467 577 a 12 12 0 0 1 12 12 v 9 m 252 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 1479 598 v 33 m 252 0 v -33"/>
<path d=" M 1479 598 v 0 a 12 12 0 0 0 12 12 m 172 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="172" x="1491" y="599"/>
<text x="1577" y="615">
with_no_client_auth</text>
</g>
<path d=" M 1479 631 v 0 a 12 12 0 0 0 12 12 m 228 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="nonterminal">
<rect height="22" width="228" x="1491" y="632"/>
<text x="1605" y="648">
with_client_cert_resolver</text>
</g>
</g>
</g>
<path d=" M 1449 577 h 10"/>
</g>
</g>
</g>
<path d=" M 2199 326 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 326 h 10"/>
<path d=" M 1123 326 h 10"/>
<path d=" M 2189 326 h 10"/>
</g>
</g>
</svg>

